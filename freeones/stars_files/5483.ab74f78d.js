"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5483],{25483:function(e,t,o){o.r(t),o.d(t,{default:function(){return m}});var n=o(55959),l=o(52861),c=o(67948),r=o(46822),a=o(30720),d=o(95419),i=o(13171),s=o(25038),p=o(80928);const u={key:2,class:"inline-block"},y={key:3,class:"inline-block"},k={key:1,href:"#",class:"text-center"};var m={__name:"Collections",props:{contentType:{type:String,default:""},typeId:{type:String,default:""},customerLocale:{type:String,default:"en"}},setup(e){const t=e,{t:m}=(0,p.T_)(o(54929)),{CollectionModal:f,show:v,uniqueModalId:B}=(0,s.Z)(t.typeId,"show-collection-modal-");(0,n.provide)("uniqueModalId",B);const T=(0,n.ref)(!1),g=(0,n.ref)(!1),I=e=>{e.contentType===t.contentType&&e.typeId===t.typeId&&(T.value=!0)},h=e=>{e.contentType===t.contentType&&e.typeId===t.typeId&&(T.value=!1)};return(0,n.onMounted)((()=>{const e={type:t.contentType,"type-id":t.typeId};a.Z.isLoggedIn()&&(g.value=!0,l.Z.get(r.Z.USER_FAVORITE_EXISTS,{params:e}).then((e=>{T.value=e.data.userIsFollowing,T.value&&i.Z.emit("contentAddedToCollection",{contentType:t.contentType,typeId:t.typeId}),g.value=!1})).catch((e=>{c.Z.error(e),g.value=!1}))),i.Z.on("contentRemovedFromCollection",h),i.Z.on("contentAddedToCollection",I)})),(t,o)=>{const l=(0,n.resolveComponent)("icon");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[t.$slots.default?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,onClick:o[1]||(o[1]=(0,n.withModifiers)(((...e)=>(0,n.unref)(v)&&(0,n.unref)(v)(...e)),["prevent"]))},[g.value?((0,n.openBlock)(),(0,n.createElementBlock)("a",k,[(0,n.createVNode)((0,n.unref)(d.Z))])):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[!0!==T.value?(0,n.renderSlot)(t.$slots,"default",{key:0},(()=>[(0,n.createTextVNode)(" Not added ")])):(0,n.renderSlot)(t.$slots,"added",{key:1},(()=>[(0,n.createTextVNode)(" Added ")]))],64))])):((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:"#",class:"flex flex-wrap flex-col justify-between l:flex-row items-center mr-4 hand",onClick:o[0]||(o[0]=(0,n.withModifiers)(((...e)=>(0,n.unref)(v)&&(0,n.unref)(v)(...e)),["prevent"]))},[T.value?((0,n.openBlock)(),(0,n.createBlock)(l,{key:1,icon:"close",classes:"svg-icon-ll svg-icon-md-mlm:mr-1 color-primary"})):((0,n.openBlock)(),(0,n.createBlock)(l,{key:0,icon:"add",classes:"svg-icon-ll svg-icon-md-mlm:mr-1 color-primary"})),T.value?((0,n.openBlock)(),(0,n.createElementBlock)("span",y,(0,n.toDisplayString)((0,n.unref)(m)("removeFromCollection")),1)):((0,n.openBlock)(),(0,n.createElementBlock)("span",u,(0,n.toDisplayString)((0,n.unref)(m)("addToCollection")),1))])),(0,n.createVNode)((0,n.unref)(f),{"content-type":e.contentType,"type-id":e.typeId,"is-following-mutation":T.value},null,8,["content-type","type-id","is-following-mutation"])])}}}}}]);